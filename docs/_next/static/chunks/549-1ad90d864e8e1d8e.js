(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{37243:function(e,t,n){"use strict";n.d(t,{DK:function(){return u},Hc:function(){return a},eL:function(){return l},u4:function(){return c}});var o=n(2768),s=n(38033),i=n(11248),r=n(54288);function a(e,t){return(0,i.a)({queryFn:async()=>{let t=await fetch(e,{method:"GET"});return await t.json()},queryKey:["wfs","useGetFeatureInfo",e],...t})}function l(e){return(0,r.D)({mutationFn:async e=>{let t="";if(e.features.length>1){let n=e.features.map(e=>{let t=(0,s.UG)(e).trim();return"\n					<gml:polygonMember>\n						".concat(t,"\n					</gml:polygonMember>\n					")}).join("\n");t='\n				<gml:MultiPolygon xmlns="http://www.opengis.net/gml" srsName="EPSG:3857">\n					'.concat(n,"\n				</gml:MultiPolygon>\n				")}else t=(0,s.UG)(e.features[0]);let n='\n			<wfs:Transaction\n				xmlns:wfs="http://www.opengis.net/wfs"\n				xmlns:gml="http://www.opengis.net/gml"\n				xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n					service="WFS"\n					version="1.1.0"\n					xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/WFS-transaction.xsd">\n				<wfs:Insert>\n					<buld_test>\n						<name>'.concat(e.name,"</name>\n						<address>").concat(e.address,"</address>\n						<SHAPE>\n							").concat(t.trim(),"\n						</SHAPE>\n					</buld_test>\n				</wfs:Insert>\n			</wfs:Transaction>\n			"),i=await fetch("".concat(o.CT,"/wfs"),{body:n,method:"POST"}),r=await i.text();return new DOMParser().parseFromString(r,"text/xml")},mutationKey:["wfs","usePostFeature"],...e})}function c(e){return(0,r.D)({mutationFn:async e=>{let t="";if(e.features.length>1){let n=e.features.map(e=>{let t=(0,s.UG)(e).trim();return"\n					<gml:polygonMember>\n						".concat(t,"\n					</gml:polygonMember>\n					")}).join("\n");t='\n				<gml:MultiPolygon xmlns="http://www.opengis.net/gml" srsName="EPSG:3857">\n					'.concat(n,"\n				</gml:MultiPolygon>\n				")}else t=(0,s.UG)(e.features[0]);let n='\n			<wfs:Transaction\n				xmlns:wfs="http://www.opengis.net/wfs"\n				xmlns:gml="http://www.opengis.net/gml"\n				xmlns:ogc="http://www.opengis.net/ogc"\n				xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n				service="WFS"\n				version="1.1.0"\n				xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd">\n				<wfs:Update typeName="buld_test">\n					<wfs:Property>\n						<wfs:Name>name</wfs:Name>\n						<wfs:Value>'.concat(e.name,"</wfs:Value>\n					</wfs:Property>\n\n					<wfs:Property>\n						<wfs:Name>address</wfs:Name>\n						<wfs:Value>").concat(e.address,"</wfs:Value>\n					</wfs:Property>\n\n					<wfs:Property>\n						<wfs:Name>SHAPE</wfs:Name>\n						<wfs:Value>\n							").concat(t,'\n						</wfs:Value>\n					</wfs:Property>\n\n					<ogc:Filter>\n						<ogc:FeatureId fid="').concat(e.id,'" />\n					</ogc:Filter>\n				</wfs:Update>\n			</wfs:Transaction>\n			'),i=await fetch("".concat(o.CT,"/wfs"),{body:n,method:"POST"}),r=await i.text();return new DOMParser().parseFromString(r,"text/xml")},mutationKey:["wfs","useUpdateFeature"],...e})}function u(e){return(0,r.D)({mutationFn:async e=>{let t=await fetch("".concat(o.CT,"/wfs"),{body:'\n			<wfs:Transaction\n				xmlns:wfs="http://www.opengis.net/wfs"\n				xmlns:ogc="http://www.opengis.net/ogc"\n				xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n				service="WFS"\n				version="1.1.0"\n				xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd">\n				<wfs:Delete typeName="buld_test">\n					<ogc:Filter>\n						<ogc:FeatureId fid="'.concat(e,'" />\n					</ogc:Filter>\n				</wfs:Delete>\n			</wfs:Transaction>\n			'),method:"POST"}),n=await t.text();return new DOMParser().parseFromString(n,"text/xml")},mutationKey:["wfs","useDeleteFeature"],...e})}},56028:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var o=n(39926),s=n(75890),i=n(43160),r=n(598),a=n(52937),l=n(41299),c=n(4057),u=n(54839),f=n(99271),d=n.n(f),w=n(87103),g=n(97172),m=n.n(g);let p=d().bind(m());var h=function(e){let{id:t,header:n="-",thumb:f,list:d,onClose:g,onThumbClick:m,...h}=e;return(0,o.jsx)(l.Z,{"data-component":"MapPopup",id:t,...h,children:(0,o.jsxs)(c.Z,{gap:1,maxWidth:250,padding:2,children:[(0,o.jsxs)(c.Z,{alignItems:"center",direction:"row",gap:1,justifyContent:"space-between",children:[(0,o.jsx)(u.Z,{color:"primary",fontWeight:"bold",children:n}),g?(0,o.jsx)(a.Z,{size:"small",onClick:g,children:(0,o.jsx)(s.Z,{fontSize:"inherit"})}):null]}),f?(0,o.jsx)(i.Z,{border:"1px solid",borderColor:"ActiveBorder",borderRadius:2,overflow:"hidden",paddingTop:"100%",position:"relative",children:(0,o.jsx)(i.Z,{height:"100%",left:0,position:"absolute",top:0,width:"100%",children:(0,o.jsx)(r.Z,{className:p("button"),onClick:m,children:(0,o.jsx)("img",{alt:f,className:p("image"),height:"100%",src:f,width:"100%"})})})}):null,d?(0,o.jsx)(c.Z,{gap:1,children:d.map((e,t)=>{let{key:n,value:s,link:i,color:r}=e;return(0,o.jsxs)(c.Z,{direction:"row",gap:1,children:[(0,o.jsx)(c.Z,{width:70,children:(0,o.jsx)(u.Z,{fontWeight:"bold",variant:"caption",children:n})}),(0,o.jsx)(c.Z,{flex:1,children:i?(0,o.jsx)(u.Z,{color:r,variant:"caption",children:(0,o.jsx)(w.default,{href:i,target:"_blank",children:s})}):(0,o.jsx)(u.Z,{color:r,variant:"caption",children:s})})]},t)})}):null]})})}},30310:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n(39926),s=n(98594),i=n(34901),r=n(54636),a=n(50878),l=n(54839),c=n(99271),u=n.n(c),f=n(48806),d=n(10496),w=n(39647),g=n.n(w);let m=u().bind(g());function p(){let{map:e}=(0,d.useContext)(i.X),{setModal:t}=(0,r.C)(),[n,c]=(0,d.useState)(!1),u=(0,d.useCallback)(()=>{e&&(c(!0),navigator.geolocation.getCurrentPosition(t=>{let{latitude:n,longitude:o}=t.coords,s=e.getView().getProjection().getCode(),i=e.getView().getZoom()||0,r=(0,f.Z)("EPSG:4326",s,[o,n]);e.getView().animate({center:r,duration:2e3}),e.getView().animate({duration:1e3,zoom:i-3},{duration:1e3,zoom:i},()=>{c(!1)})},()=>{t({body:(0,o.jsx)(l.Z,{variant:"caption",children:"지오로케이션 호출에 실패했습니다."}),title:"지오로케이션 실패",type:"error"}),c(!1)},{enableHighAccuracy:!0}))},[e,c,t]);return(0,o.jsx)(s.Z,{bgcolor:"limegreen","data-component":"GeolocationButton",disabled:n,onClick:u,children:(0,o.jsx)(a.default,{className:m({icon:n}),htmlColor:"white"})})}},36280:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(39926),s=n(98594),i=n(34901),r=n(23744),a=n(10496);function l(e){let{homePosition:t}=e,{map:n}=(0,a.useContext)(i.X),[l,c]=(0,a.useState)(!1),u=(0,a.useCallback)(()=>{if(n){c(!0);let e=n.getView().getZoom()||0;n.getView().animate({center:t,duration:2e3}),n.getView().animate({duration:1e3,zoom:e-3},{duration:1e3,zoom:e},()=>{c(!1)})}},[t,n,c]);return(0,o.jsx)(s.Z,{bgcolor:"orange",disabled:l,onClick:u,children:(0,o.jsx)(r.Z,{htmlColor:"white"})})}},97818:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(39926),s=n(56028),i=n(34901),r=n(68254),a=n(10496);let l="popup";function c(){let{map:e}=(0,a.useContext)(i.X),[t,n]=(0,a.useState)(),c=(0,a.useCallback)(()=>{n(void 0)},[n]),u=(0,a.useMemo)(()=>{if(t){let e=t.getId()||"-",n=t.get("address")||"-",o=t.get("reg_date")||"-";return[{key:"ID",value:e},{color:"primary",key:"주소",link:"https://map.naver.com/p/search/".concat(encodeURIComponent(n)),value:n},{key:"생성일자",value:o}]}},[t]);return(0,a.useEffect)(()=>{if(e){let t=new r.Z({autoPan:{animation:{duration:250}},element:document.getElementById(l)||void 0,id:"popup",offset:[0,-20],positioning:"bottom-center"});e.addOverlay(t)}},[e,n]),(0,a.useEffect)(()=>{e&&e.on("singleclick",t=>{e.hasFeatureAtPixel(t.pixel)?e.forEachFeatureAtPixel(t.pixel,e=>{var t;(null===(t=e.getId())||void 0===t?void 0:t.toString().startsWith("buld_test"))&&n(e)}):n(void 0)})},[e]),(0,a.useEffect)(()=>{if(e){let n=e.getOverlayById("popup");if(t){let e=t.getGeometry();if(e){let[t,o,s,i]=e.getExtent();null==n||n.setPosition([(s+t)/2,(i+o)/2])}else null==n||n.setPosition(void 0)}else null==n||n.setPosition(void 0)}},[e,t]),(0,o.jsx)(s.Z,{header:null==t?void 0:t.get("name"),id:l,list:u,onClose:c})}},43626:function(e,t,n){"use strict";n.d(t,{W:function(){return w},modifys:function(){return m},selects:function(){return d},snaps:function(){return g}});var o=n(27731),s=n(27067),i=n(31697),r=n(42359),a=n(69147),l=n(67656),c=n(34),u=n(49674);let f=new a.ZP({source:o.oH.drawLayer.getSource(),type:"Polygon"}),d={getClusterClickSelect:function(e){return new c.Z({condition:r.V4,filter:e=>1===e.get("features").length,style:t=>(0,i.pl)(t,e)})},getClusterHoverSelect:function(e){return new c.Z({condition:r.MJ,filter:e=>1===e.get("features").length,style:t=>(0,i.hV)(t,e)})},getWfsClickSelect:function(e){let t=new c.Z({condition:r.V4,filter:e=>void 0!==e.getId(),style:t=>(0,i.o3)(t,e)});return t.set("name","clickSelect"),t},getWfsHoverSelect:function(e){let t=new c.Z({condition:r.MJ,filter:e=>void 0!==e.getId(),style:t=>(0,i.Ki)(t,e)});return t.set("name","hoverSelect"),t}},w={drawInteraction:f},g={getWfsSnap:function(e){let t=new u.Z({features:e,source:s.Vr.transactionSource});return t.set("name","snap"),t}},m={getWfsModify:function(e){let t=new l.Z({features:e,source:s.Vr.transactionSource});return t.set("name","modify"),t}}},97172:function(e){e.exports={button:"BasicPopup_button__JkJDn",image:"BasicPopup_image__FGnso"}},39647:function(e){e.exports={icon:"GeolocationButton_icon__O2WtR",rolling:"GeolocationButton_rolling__mgNSn"}}}]);