(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{18617:function(e,t,n){Promise.resolve().then(n.bind(n,98567)),Promise.resolve().then(n.bind(n,42352)),Promise.resolve().then(n.bind(n,53646)),Promise.resolve().then(n.t.bind(n,62372,23)),Promise.resolve().then(n.bind(n,30310)),Promise.resolve().then(n.bind(n,36280)),Promise.resolve().then(n.bind(n,17282)),Promise.resolve().then(n.bind(n,34361)),Promise.resolve().then(n.bind(n,59259)),Promise.resolve().then(n.bind(n,43566))},75890:function(e,t,n){"use strict";var i=n(13767);t.Z=void 0;var o=i(n(41032)),s=n(39926),r=(0,o.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=r},56028:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(39926),o=n(75890),s=n(43160),r=n(598),a=n(52937),l=n(41299),d=n(4057),c=n(54839),u=n(99271),h=n.n(u),g=n(87103),f=n(97172),m=n.n(f);let p=h().bind(m());var v=function(e){let{id:t,header:n="-",thumb:u,list:h,onClose:f,onThumbClick:m,...v}=e;return(0,i.jsx)(l.Z,{"data-component":"MapPopup",id:t,...v,children:(0,i.jsxs)(d.Z,{gap:1,maxWidth:250,padding:2,children:[(0,i.jsxs)(d.Z,{alignItems:"center",direction:"row",gap:1,justifyContent:"space-between",children:[(0,i.jsx)(c.Z,{color:"primary",fontWeight:"bold",children:n}),f?(0,i.jsx)(a.Z,{size:"small",onClick:f,children:(0,i.jsx)(o.Z,{fontSize:"inherit"})}):null]}),u?(0,i.jsx)(s.Z,{border:"1px solid",borderColor:"ActiveBorder",borderRadius:2,overflow:"hidden",paddingTop:"100%",position:"relative",children:(0,i.jsx)(s.Z,{height:"100%",left:0,position:"absolute",top:0,width:"100%",children:(0,i.jsx)(r.Z,{className:p("button"),onClick:m,children:(0,i.jsx)("img",{alt:u,className:p("image"),height:"100%",src:u,width:"100%"})})})}):null,h?(0,i.jsx)(d.Z,{gap:1,children:h.map((e,t)=>{let{key:n,value:o,link:s,color:r}=e;return(0,i.jsxs)(d.Z,{direction:"row",gap:1,children:[(0,i.jsx)(d.Z,{width:70,children:(0,i.jsx)(c.Z,{fontWeight:"bold",variant:"caption",children:n})}),(0,i.jsx)(d.Z,{flex:1,children:s?(0,i.jsx)(c.Z,{color:r,variant:"caption",children:(0,i.jsx)(g.default,{href:s,target:"_blank",children:o})}):(0,i.jsx)(c.Z,{color:r,variant:"caption",children:o})})]},t)})}):null]})})}},30310:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n(39926),o=n(98594),s=n(34901),r=n(54636),a=n(50878),l=n(54839),d=n(99271),c=n.n(d),u=n(48806),h=n(10496),g=n(39647),f=n.n(g);let m=c().bind(f());function p(){let{map:e}=(0,h.useContext)(s.X),{setModal:t}=(0,r.C)(),[n,d]=(0,h.useState)(!1),c=(0,h.useCallback)(()=>{e&&(d(!0),navigator.geolocation.getCurrentPosition(t=>{let{latitude:n,longitude:i}=t.coords,o=e.getView().getProjection().getCode(),s=e.getView().getZoom()||0,r=(0,u.Z)("EPSG:4326",o,[i,n]);e.getView().animate({center:r,duration:2e3}),e.getView().animate({duration:1e3,zoom:s-3},{duration:1e3,zoom:s},()=>{d(!1)})},()=>{t({body:(0,i.jsx)(l.Z,{variant:"caption",children:"지오로케이션 호출에 실패했습니다."}),title:"지오로케이션 실패",type:"error"}),d(!1)},{enableHighAccuracy:!0}))},[e,d,t]);return(0,i.jsx)(o.Z,{bgcolor:"limegreen","data-component":"GeolocationButton",disabled:n,onClick:c,children:(0,i.jsx)(a.default,{className:m({icon:n}),htmlColor:"white"})})}},36280:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=n(39926),o=n(98594),s=n(34901),r=n(23744),a=n(10496);function l(e){let{homePosition:t}=e,{map:n}=(0,a.useContext)(s.X),[l,d]=(0,a.useState)(!1),c=(0,a.useCallback)(()=>{if(n){d(!0);let e=n.getView().getZoom()||0;n.getView().animate({center:t,duration:2e3}),n.getView().animate({duration:1e3,zoom:e-3},{duration:1e3,zoom:e},()=>{d(!1)})}},[t,n,d]);return(0,i.jsx)(o.Z,{bgcolor:"orange",disabled:l,onClick:c,children:(0,i.jsx)(r.Z,{htmlColor:"white"})})}},34361:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=n(39926),o=n(39993),s=n(43626),r=n(27731),a=n(92214);function l(e){let{children:t}=e;return(0,i.jsx)(o.Z,{interactions:[s.selects.getClusterClickSelect("name"),s.selects.getClusterHoverSelect("name")],layers:[r.wfsLayer.wfsStarbucksClusterLayer],view:a.t.seoulMiddleView,hasCursor:!0,children:t})}},59259:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n(39926),o=n(16365),s=n(34901),r=n(43160),a=n(28124),l=n(47696),d=n(4057),c=n(54839),u=n(10496);function h(){let{map:e}=(0,u.useContext)(s.X),t=(0,u.useCallback)((t,n)=>{if(e&&!Array.isArray(n)){let t=e.getAllLayers().find(e=>"wfs"===e.get("name"));if(t){let e=t.getSource();null==e||e.setDistance(n)}}},[e]);return(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(c.Z,{variant:"caption",children:"클러스터 거리"}),(0,i.jsx)(l.ZP,{"aria-label":"Small",defaultValue:100,max:200,min:0,size:"small",valueLabelDisplay:"auto",onChange:t})]}),(0,i.jsx)(r.Z,{padding:.5,children:(0,i.jsx)(a.Z,{})})]})}},16365:function(e,t,n){"use strict";var i=n(97503);t.Z=i.default},43566:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n(39926),o=n(56028),s=n(8231),r=n(99271),a=n.n(r),l=n(23730),d=n.n(l);let c=a().bind(d());var u=function(e){let{image:t,className:n,...o}=e;return(0,i.jsx)(s.Z,{className:c("backdrop",n),"data-component":"ImageViewer",open:void 0!==t,...o,children:(0,i.jsx)("img",{alt:t,className:c("image",{close:void 0===t}),height:"80%",src:t,width:"80%"})})},h=n(34901),g=n(68254),f=n(10496);let m="popup";function p(){let{map:e}=(0,f.useContext)(h.X),[t,n]=(0,f.useState)(),[s,r]=(0,f.useState)(),a=(0,f.useCallback)(()=>{n(void 0)},[n]),l=(0,f.useCallback)(()=>{r("https://www.starbucks.co.kr/".concat(null==t?void 0:t.get("thumbnail")))},[t,r]),d=(0,f.useCallback)(()=>{r(void 0)},[r]),c=(0,f.useMemo)(()=>{if(t){let e=t.get("doro_addr")||"-",n=t.get("addr")||"-",i=t.get("tel")||"-";return[{key:"ID",value:t.getId()||"-"},{color:"primary",key:"도로명주소",link:"https://map.naver.com/p/search/".concat(encodeURIComponent(e)),value:e},{color:"primary",key:"지번주소",link:"https://map.naver.com/p/search/".concat(encodeURIComponent(n)),value:n},{color:"green",key:"연락처",link:"tel:".concat(i),value:i}]}},[t]);return(0,f.useEffect)(()=>{if(e){let t=new g.Z({autoPan:{animation:{duration:250}},element:document.getElementById(m)||void 0,id:"popup",offset:[0,-20],positioning:"bottom-center"});e.addOverlay(t)}},[e,n]),(0,f.useEffect)(()=>{e&&e.on("singleclick",t=>{e.hasFeatureAtPixel(t.pixel)?e.forEachFeatureAtPixel(t.pixel,e=>{var t;let i=e.get("features"),o=i[0];1!==i.length?n(void 0):(null===(t=o.getId())||void 0===t?void 0:t.toString().startsWith("point_starbucks"))&&n(o)}):n(void 0)})},[e]),(0,f.useEffect)(()=>{if(e){let n=e.getOverlayById("popup");if(t){let e=t.getGeometry();if(e){let[t,i,o,s]=e.getExtent();null==n||n.setPosition([(o+t)/2,(s+i)/2])}else null==n||n.setPosition(void 0)}else null==n||n.setPosition(void 0)}},[e,t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{header:(null==t?void 0:t.get("name"))||"-",id:m,list:c,thumb:"https://www.starbucks.co.kr/".concat(null==t?void 0:t.get("thumbnail")),onClose:a,onThumbClick:l}),(0,i.jsx)(u,{image:s,onClick:d})]})}},43626:function(e,t,n){"use strict";n.d(t,{W:function(){return g},modifys:function(){return m},selects:function(){return h},snaps:function(){return f}});var i=n(27731),o=n(27067),s=n(31697),r=n(42359),a=n(69147),l=n(67656),d=n(34),c=n(49674);let u=new a.ZP({source:i.oH.drawLayer.getSource(),type:"Polygon"}),h={getClusterClickSelect:function(e){return new d.Z({condition:r.V4,filter:e=>1===e.get("features").length,style:t=>(0,s.pl)(t,e)})},getClusterHoverSelect:function(e){return new d.Z({condition:r.MJ,filter:e=>1===e.get("features").length,style:t=>(0,s.hV)(t,e)})},getWfsClickSelect:function(e){let t=new d.Z({condition:r.V4,filter:e=>void 0!==e.getId(),style:t=>(0,s.o3)(t,e)});return t.set("name","clickSelect"),t},getWfsHoverSelect:function(e){let t=new d.Z({condition:r.MJ,filter:e=>void 0!==e.getId(),style:t=>(0,s.Ki)(t,e)});return t.set("name","hoverSelect"),t}},g={drawInteraction:u},f={getWfsSnap:function(e){let t=new c.Z({features:e,source:o.Vr.transactionSource});return t.set("name","snap"),t}},m={getWfsModify:function(e){let t=new l.Z({features:e,source:o.Vr.transactionSource});return t.set("name","modify"),t}}},97172:function(e){e.exports={button:"BasicPopup_button__JkJDn",image:"BasicPopup_image__FGnso"}},23730:function(e){e.exports={backdrop:"ImageViewer_backdrop__j5844",image:"ImageViewer_image__iVETB",close:"ImageViewer_close___xjCn"}},39647:function(e){e.exports={icon:"GeolocationButton_icon__O2WtR",rolling:"GeolocationButton_rolling__mgNSn"}},68254:function(e,t,n){"use strict";var i=n(29390),o=n(77129),s=n(70790),r=n(75682),a=n(29342),l=n(93107);let d={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class c extends i.Z{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(d.ELEMENT,this.handleElementChanged),this.addChangeListener(d.MAP,this.handleMapChanged),this.addChangeListener(d.OFFSET,this.handleOffsetChanged),this.addChangeListener(d.POSITION,this.handlePositionChanged),this.addChangeListener(d.POSITIONING,this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(d.ELEMENT)}getId(){return this.id}getMap(){return this.get(d.MAP)||null}getOffset(){return this.get(d.OFFSET)}getPosition(){return this.get(d.POSITION)}getPositioning(){return this.get(d.POSITIONING)}handleElementChanged(){(0,l.ep)(this.element);let e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,l.ZF)(this.element),(0,a.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,a.oL)(e,o.Z.POSTRENDER,this.render,this),this.updatePixelPosition();let t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(d.ELEMENT,e)}setMap(e){this.set(d.MAP,e)}setOffset(e){this.set(d.OFFSET,e)}setPosition(e){this.set(d.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){let t=this.getMap();if(!t||!t.getTargetElement()||!this.get(d.POSITION))return;let n=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),o=this.getRect(i,[(0,l.iO)(i),(0,l.Pb)(i)]),s=void 0===(e=e||{}).margin?20:e.margin;if(!(0,r.r4)(n,o)){let i=o[0]-n[0],r=n[2]-o[2],a=o[1]-n[1],l=n[3]-o[3],d=[0,0];if(i<0?d[0]=i-s:r<0&&(d[0]=Math.abs(r)+s),a<0?d[1]=a-s:l<0&&(d[1]=Math.abs(l)+s),0!==d[0]||0!==d[1]){let n=t.getView().getCenterInternal(),i=t.getPixelFromCoordinateInternal(n);if(!i)return;let o=[i[0]+d[0],i[1]+d[1]],s=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(o),duration:s.duration,easing:s.easing})}}}getRect(e,t){let n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+t[0],o+t[1]]}setPositioning(e){this.set(d.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){let e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}let n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(e,t){let n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let s=Math.round(e[0]+i[0])+"px",r=Math.round(e[1]+i[1])+"px",a="0%",l="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?a="-100%":("bottom-center"==o||"center-center"==o||"top-center"==o)&&(a="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?l="-100%":("center-left"==o||"center-center"==o||"center-right"==o)&&(l="-50%");let d=`translate(${a}, ${l}) translate(${s}, ${r})`;this.rendered.transform_!=d&&(this.rendered.transform_=d,n.transform=d)}getOptions(){return this.options}}t.Z=c}},function(e){e.O(0,[322,880,864,27,77,333,696,116,503,991,399,744],function(){return e(e.s=18617)}),_N_E=e.O()}]);